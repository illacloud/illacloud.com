---
title: Docker all-in-one Image
metaTitle: Docker all in-one image doc | ILLA Cloud
tagCategory: doc_menu_docker-all-in-one-image_click
desc: å­¦ä¹ å¦‚ä½•ä½¿ç”¨ILLAä¸€ä½“åŒ–é•œåƒéƒ¨ç½²å¹¶è¿è¡ŒILLA
crowdinRepo: https://crowdin.com/multilingual/illacloud-website/199?languages=zhcn&filter=basic&value=0
categoryName: ğŸ‘· éƒ¨ç½² ILLA
categoryPriority: 2
postPriority: 1
---

* * *

## <h2 hidden>Docker all-in-one Image</h2>

### æè¿°

ä½¿ç”¨all-in-one imageæ„å»ºILLAï¼Œå¹¶åœ¨æ‚¨çš„æœºå™¨ä¸Šè¿è¡Œå®ƒã€‚ æ‚¨å¯ä»¥åœ¨ [scripts](https://github.com/illacloud/deply-illa-manually/blob/main/docker/scripts)æ–‡ä»¶å¤¹ä¸­æŸ¥çœ‹è„šæœ¬æ–‡ä»¶ä»¥äº†è§£æ›´å¤šè¯¦æƒ…ã€‚

æ³¨ï¼š

æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½¿ç”¨æˆ‘ä»¬çš„è‡ªåŠ¨éƒ¨ç½²å·¥å…·[illa-cli](https://github.com/illacloud/illa)ã€‚

ç›®å‰ï¼Œæˆ‘ä»¬ä¸æ”¯æŒMacbook M1(darwin-arm64)ã€‚

### è¿è¡Œå®˜æ–¹çš„é•œåƒ

å®‰è£… GNU makeå¹¶è¾“å…¥ï¼š

```jsx
make run-official-image
```

æˆ–æ‰§è¡Œï¼š

```jsx
/bin/bash scripts/run-official-image.sh
```

è¿™ä¸ªå‘½ä»¤å°†æ‹‰ä¸‹æ¥ILLAå®˜æ–¹é•œåƒå¹¶åœ¨ä½ çš„Dockerä¸­è¿è¡Œå®ƒã€‚

å¹¶ä½¿ç”¨é»˜è®¤ç”¨æˆ·å**`root`** å’Œå¯†ç **`password`** ç™»å½•ã€‚

### æ‰‹åŠ¨æ„å»ºé•œåƒå¹¶è¿è¡Œ

å®‰è£… GNU make (æˆ–æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬æ–‡ä»¶å¤¹ä¸­çš„ shell è„šæœ¬)ã€‚

ä¸ºæ„å»ºILLAçš„all-in-one imageå¹¶è¿è¡Œï¼Œè¯·è¾“å…¥ï¼š

```jsx
make all
```

å¯¹äºpodmanï¼Œè¾“å…¥ï¼š

```jsx
make run-by-podman
```

æˆ–åœ¨scriptæ–‡ä»¶å¤¹ä¸­æ‰§è¡Œ shell è„šæœ¬ `runpodman.sh` ã€‚

### åœæ­¢å¹¶åˆ é™¤å®¹å™¨

```jsx
make stop-and-remove-container
```

### æ¸…é™¤ Postgres æ•°æ®åº“æ–‡ä»¶

** è¿™ä¸ªå‘½ä»¤å°†ä¼šåˆ é™¤æ‚¨çš„æ•°æ®åº“æ–‡ä»¶ï¼ï¼ï¼ \*\*\*** è¯·å°å¿ƒæ“ä½œå¹¶å¤‡ä»½ \*\*\*

åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒPostgresæ•°æ®åº“å°†å­˜å‚¨åœ¨ `/var/lib/illa/database/postgresql/` æ–‡ä»¶å¤¹ä¸­ã€‚

è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ é™¤å®ƒã€‚

```jsx
make clean-postgres-database-file
```

### é…ç½®è¿è¡Œæ—¶ç¯å¢ƒå˜é‡

å¿…è¦æ—¶ç¼–è¾‘ "scripts/run.sh"

```jsx
# postgres æ•°æ®åº“å¯†ç 
PG_PASS=mysecretpassword

# repo home dir
ILLA_HOME_DIR=/var/lib/illa

# postgres æ•°æ®åº“æ–‡ä»¶å­˜å‚¨æ–‡ä»¶å¤¹
PG_VOLUMN=${ILLA_HOME_DIR}/database/postgresql
DRIVE_VOLUMN=${ILLA_HOME_DIR}/driver
```
