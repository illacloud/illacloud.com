---
title: Docker all-in-one Image
tagCategory: doc_menu_docker-all-in-one-image_click
desc: 使用all-in-one image构建ILLA，并在您的机器上运行它。
---

* * *

## <Heading hidden>Docker all-in-one Image</Heading>

### 描述

使用all-in-one image构建ILLA，并在您的机器上运行它。 您可以在 [scripts](https://github.com/illacloud/deply-illa-manually/blob/main/docker/scripts)文件夹中查看脚本文件以了解更多详情。

注：

我们强烈建议使用我们的自动部署工具[illa-cli](https://github.com/illacloud/illa)。

目前，我们不支持Macbook M1(darwin-arm64)。

### 运行官方的Image

安装 GNU make

```jsx
make run-official-image
```

或执行：

```jsx
/bin/bash scripts/run-official-image.sh
```

这个命令将拉下来ILLA官方镜像并在你的Docker中运行它。

并使用默认用户名**`root`** 和密码**`password`** 登录。

### 手动构建镜像并运行

安装 GNU make (或手动执行脚本文件夹中的 shell 脚本)。

为构建ILLA的all-in-one image并运行，请输入：

```jsx
make all
```

对于podman，输入：

```jsx
make run-by-podman
```

或在script文件夹中执行 shell 脚本 `runpodman.sh` 。

### 停止并删除容器

```jsx
make stop-and-remove-container
```

### 清除 Postgres 数据库文件

** 这个命令将会删除您的数据库文件！！！ \*\*\*** 请小心操作并备份 \*\*\*

在默认情况下，Postgres数据库将存储在 `/var/lib/illa/database/postgresql/` 文件夹中。

运行以下命令来删除它。

```jsx
创建清除后的数据库文件
```

### 配置运行时环境变量

必要时编辑 "scripts/run.sh"

```jsx
# postgres 数据库密码
PG_PASS=mysecret密码

# repo home dir
ILLA_HOME_DIR=/var/lib/illa

# postgres 数据库文件存储文件夹
PG_VOLUMN=${ILLA_HOME_DIR}/database/postgresql
DRIVE_VOLUMN=${ILLA_HOME_DIR}/driver
```
