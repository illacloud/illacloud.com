---
title: Kubernetes
metaTitle: Kubernetes Doc | ILLA Cloud
tagCategory: doc_menu_kubernetes_click
desc: illaã®ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æ§‹ç¯‰ã—ã€ã‚ãªãŸã®ãƒã‚·ãƒ³ä¸Šã§k8sã§ãã‚Œã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
crowdinRepo: https://crowdin.com/multilingual/illacloud-website/229?languages=ja&filter=basic&value=0
categoryName: ğŸ‘· Deploy ILLA
categoryPriority: 2
postPriority: 1
---

* * *

## <h2 hidden>Kubernetes</h2>

### èª¬æ˜

illaã®ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æ§‹ç¯‰ã—ã€ã‚ãªãŸã®ãƒã‚·ãƒ³ä¸Šã§k8sã§ãã‚Œã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ è©³ç´°ã«ã¤ã„ã¦ã¯ã€ [scripts](https://github.com/illacloud/deploy-illa-manually/blob/main/kubernetes/scripts)ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã”è¦§ãã ã•ã„ã€‚

ãƒ¡ãƒ¢:

auto-deploy tools[illa-cli](https://github.com/illacloud/illa) ã‚’ä½¿ã£ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã‚’å¼·ããŠå‹§ã‚ã—ã¾ã™ã€‚

ãã—ã¦ã€ç¾æ™‚ç‚¹ã§ã¯ã€Apple Silicon M1(darwin-arm64ã‚¢ãƒ¼ãƒ)ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚

### å…¬å¼ã®ã‚¹ãƒªãƒ ãªç”»åƒã§å®Ÿè¡Œ

GNU make ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€æ¬¡ã®ã‚ˆã†ã«å…¥åŠ›ã—ã¾ã™:

```jsx
ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹
```

å®Ÿè¡Œã—ã¦ã¿ã¦ãã ã•ã„

```jsx
/bin/bash scripts/deploy.sh
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯illasoftã®å…¬å¼ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å¼•ãå‡ºã—ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ°¸ç¶šçš„ãªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

[illa-builder.yaml](https://github.com/illacloud/deploy-illa-manually/blob/main/kubernetes/illa-builder.yaml) ã‚’ç·¨é›†ã—ã€IAAS ã®æ°¸ç¶šçš„ãªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚

### HTTPS è¨­å®š

NodePortã‚’Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚¤ãƒ³ã‚°ãƒ¬ã‚¹ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã€443ãƒãƒ¼ãƒˆã«æ›¸ãæ›ãˆã€ã‚¤ãƒ³ã‚°ãƒ¬ã‚¹ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã«httpsè¨¼æ˜æ›¸ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãŸã¯ã€ã‚¤ãƒ³ã‚°ãƒ¬ã‚¹ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã‚’Kubernetesã‚µãƒ¼ãƒãƒ¼ã«æ‰‹å‹•ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```jsx
static_resources:
  listeners:
  - name: https_listener
    address:
      socket_address:
        address: 0.0.0.0
        port_value: 443
    filter_chains:
    - filters:
      - name: envoy.filters.network.http_connection_manager
        typed_config:
          "@type": type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager
          stat_prefix: https_listener
          route_config:
            name: local_route
            virtual_hosts:
            - name: illa_builder
              domains:
              - "illa.yourdomian.com" # replace with your domain
              routes:
              - match:
                  prefix: "/"route:
                  cluster: illa_builder
          http_filters:
          - name: envoy.filters.http.router
            typed_config:
              "@type": type.googleapis.com/envoy.extensions.filters.http.router.v3.Router
      transport_socket:
        name: envoy.transport_sockets.tls
        typed_config:
          "@type": type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.DownstreamTlsContext
          common_tls_context:
            tls_certificates:
            # replace this with your cert file
            - certificate_chain:
                filename: /your-cert-folder/fullchain.pem
              private_key:
                filename: /your-cert-folder/privkey.pem

  clusters:
  - name: illa_builder
    type: STRICT_DNS
    lb_policy: ROUND_ROBIN
    connect_timeout: 10s
    load_assignment:
      cluster_name: illa_builder
      endpoints:
      - lb_endpoints:
        - endpoint:
            address:
              socket_address:
                address: illa-builder
                port_value: 80
```
